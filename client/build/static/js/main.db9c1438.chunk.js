(this.webpackJsonpkittens=this.webpackJsonpkittens||[]).push([[0],{15:function(e,t,a){e.exports=a(29)},29:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(13),u=a.n(l),o=a(7),i=a.n(o),s=a(10),c=a(2),m=a(3),h=a(5),p=a(4),f=a(6),d=a(1),g=a(8),E=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).API_URL="/api",a.state={game:null},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"handleChange",value:function(e){var t=e.target.value;this.setState(Object(g.a)({},e.target.name,t))}},{key:"getGame",value:function(e,t){return fetch("".concat(this.API_URL,"/platforms/").concat(t,"/games/").concat(e),{method:"GET",headers:{"Content-Type":"application/json; charset=utf-8"}}).then((function(e){return e.json()})).then((function(e){return e}))}},{key:"render",value:function(){var e=this;this.state.game||this.state.game_id||this.getGame(this.props.gameId,this.props.platformId).then((function(t){e.setState({game:t})})),console.log(this.state.game);var t=r.a.createElement("p",null,"Loading");return this.state.game&&(t=r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,this.state.game.name),r.a.createElement("ul",null,r.a.createElement("li",null,"Condition: ",this.state.game.condition),r.a.createElement("li",null,"Price: $",this.state.game.price),r.a.createElement("li",null,"Posters name: ",this.state.game.sellerName),r.a.createElement("li",null,"Posters email: ",this.state.game.sellerEmail)),r.a.createElement("br",null),r.a.createElement(d.a,{to:"/platforms/".concat(this.props.platformId)},"Back"))),t}}]),t}(n.Component),b=function(e){function t(){return Object(c.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"handleChange",value:function(e){var t=e.target.value;this.setState(Object(g.a)({},e.target.name,t))}},{key:"render",value:function(){var e=this,t=this.props.getPlatform(this.props.id);console.log(this.props.id);var a=r.a.createElement("p",null,"Loading");return t&&(a=r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,t.name),r.a.createElement("h3",null,"Games"),r.a.createElement("ul",null,t.games.map((function(t){return r.a.createElement("li",null,r.a.createElement(d.a,{to:"/platforms/".concat(e.props.id,"/games/").concat(t._id),key:t},t.name))}))),r.a.createElement("input",{name:"newGame",onChange:function(t){return e.handleChange(t)},type:"text"}),r.a.createElement("br",null),r.a.createElement(d.a,{to:"/"},"Back"))),t&&0==t.games.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,t.name),r.a.createElement("h2",null,"No games found. Add some."),r.a.createElement(d.a,{to:"/"},"Back")):a}}]),t}(n.Component),v=function(e){function t(){return Object(c.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"handleChange",value:function(e){this.setState({value:e})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Game marketplace"),r.a.createElement("ol",null,this.props.platforms.map((function(e){return r.a.createElement("li",{key:e._id},r.a.createElement(d.a,{to:"/platforms/".concat(e._id)},e.name))}))),r.a.createElement("input",{name:"newKittenName",onChange:function(t){return e.handleChange(t.target.value)},type:"text"}),r.a.createElement("button",{onClick:function(t){return e.props.addPlatform(e.state.value)},type:"submit"},"Add New Platform"))}}]),t}(n.Component),y=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).state={password:"admin",username:"admin"},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"handleChange",value:function(e){this.setState({value:e})}},{key:"submit",value:function(e){e.preventDefault(),this.props.logIn(this.state.username,this.state.password)}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Login"),null===this.props.username?r.a.createElement("form",{onSubmit:function(t){return e.submit(t)}},r.a.createElement("label",null,"Username:",r.a.createElement("input",{type:"text",onChange:function(t){return e.setState({username:t.target.value})},value:this.state.username,name:"username"})),r.a.createElement("label",null,"Password:",r.a.createElement("input",{type:"password",onChange:function(t){return e.setState({password:t.target.value})},value:this.state.password,name:"password"})),r.a.createElement("input",{type:"submit",value:"Log in"})):r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,"Logged in as: ",this.props.username),r.a.createElement("button",{onClick:function(){return e.props.logOut()}},"Log out"),r.a.createElement("br",null)),r.a.createElement(d.a,{to:"/"},"Back"))}}]),t}(n.Component),k=function(e){function t(e){var a,n;return Object(c.a)(this,t),(n=Object(h.a)(this,Object(p.a)(t).call(this,e))).state=(a={platform:null,name:"",condition:null},Object(g.a)(a,"platform",null),Object(g.a)(a,"email",""),Object(g.a)(a,"price",""),a),n}return Object(f.a)(t,e),Object(m.a)(t,[{key:"handleChange",value:function(e){this.setState({value:e})}},{key:"submit",value:function(e){var t=this;e.preventDefault();var a={name:this.state.name,condition:this.state.condition,price:this.state.price,sellerName:this.props.username,sellerEmail:this.state.email},n=this.props.platforms.find((function(e){return t.state.platform===e.name}))._id;this.props.addGame(n,a)}},{key:"render",value:function(){var e=this;console.log(this.state);return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Add game"),this.props.username?r.a.createElement("form",{style:{display:"inline-grid"},onSubmit:function(t){return e.submit(t)}},r.a.createElement("label",null,"Platform:",r.a.createElement("select",{onChange:function(t){return e.setState({platform:t.target.value})},value:this.state.platform},this.props.platforms.map((function(e){return r.a.createElement("option",null,e.name)})))),r.a.createElement("label",null,"Game:",r.a.createElement("select",{onChange:function(t){return e.setState({name:t.target.value})},value:this.state.name},["Jumping simulator 2012","Walking simulator 2014","Sleeping simulator 2016","Sitting simulator 2020","Cooking simulator 2008","Life simulator 2006","Driving simulator 1990","Boredom simulator 1809","Work simulator 2000 BC"].map((function(e){return r.a.createElement("option",null,e)})))),r.a.createElement("label",null,"Condition:",r.a.createElement("select",{onChange:function(t){return e.setState({condition:t.target.value})},value:this.state.condition},["Brand new","Like new","Very good","Good","Acceptable"].map((function(e){return r.a.createElement("option",null,e)})))),r.a.createElement("label",null,"Your email:",r.a.createElement("input",{type:"text",onChange:function(t){return e.setState({email:t.target.value})},value:this.state.email,name:"email"})),r.a.createElement("label",null,"Game price:",r.a.createElement("input",{type:"text",onChange:function(t){return e.setState({price:t.target.value})},value:this.state.price,name:"price"})),r.a.createElement("input",{type:"submit",value:"Add game"})):r.a.createElement(r.a.Fragment,null,this.props.username,r.a.createElement("br",null),r.a.createElement("h4",null,"You need to be logged in to add a game. ",r.a.createElement(d.a,{to:"/login"},"Click here to log in")),r.a.createElement("br",null)),r.a.createElement(d.a,{to:"/"},"Back"))}}]),t}(n.Component),O=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).state={name:""},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"handleChange",value:function(e){this.setState({value:e})}},{key:"submit",value:function(e){e.preventDefault(),this.props.addPlatform(this.state.name)}},{key:"render",value:function(){var e=this;return console.log(this.state),r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Admin"),"admin"===this.props.username?r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Add platform"),r.a.createElement("form",{style:{display:"inline-grid"},onSubmit:function(t){return e.submit(t)}},r.a.createElement("label",null,"Platform name:",r.a.createElement("input",{type:"text",onChange:function(t){return e.setState({name:t.target.value})},value:this.state.name,name:"name"})),r.a.createElement("input",{type:"submit",value:"Add platform"}))):r.a.createElement(r.a.Fragment,null,this.props.username,r.a.createElement("br",null),r.a.createElement("h4",null,"You need to be logged in with an admin account to use this page ",r.a.createElement(d.a,{to:"/login"},"Click here to log in")),r.a.createElement("br",null)),r.a.createElement(d.a,{to:"/"},"Back"))}}]),t}(n.Component),j=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).API_URL="/api",a.state={platforms:[],token:null,username:null},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.fetchData().then((function(){return console.log("Platforms gotten!")}))}},{key:"fetchData",value:function(){var e=Object(s.a)(i.a.mark((function e(){var t,a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(this.API_URL,"/platforms"),e.next=3,fetch(t);case 3:return a=e.sent,e.next=6,a.json();case 6:return n=e.sent,e.abrupt("return",this.setState({platforms:n}));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getPlatform",value:function(e){return this.state.platforms.find((function(t){return t._id===e}))}},{key:"addPlatform",value:function(){var e=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.API_URL,"/platforms"),{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8",Authorization:"Bearer "+this.state.token},body:JSON.stringify({name:t,games:["Examples"]})});case 2:return e.next=4,this.fetchData();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addGame",value:function(){var e=Object(s.a)(i.a.mark((function e(t,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.API_URL,"/platforms/").concat(t,"/games"),{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8",Authorization:"Bearer "+this.state.token},body:JSON.stringify({game:a})});case 2:return e.next=4,this.fetchData();case 4:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"addPlatform",value:function(){var e=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.API_URL,"/platforms/"),{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8",Authorization:"Bearer "+this.state.token},body:JSON.stringify({name:t})});case 2:return e.next=4,this.fetchData();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"logIn",value:function(){var e=Object(s.a)(i.a.mark((function e(t,a){var n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("".concat(this.API_URL,"/users/authenticate/"),{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify({username:t,password:a})}).then((function(e){return e.json()})).then((function(e){n.setState({token:e.token,username:e.username})}));case 1:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"logOut",value:function(){this.setState({token:null,username:null})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},r.a.createElement(d.a,{to:"/login"},"Login"),r.a.createElement("br",null),r.a.createElement(d.a,{to:"/admin"},"Admin"),r.a.createElement("br",null),r.a.createElement(d.a,{to:"/add"},"Add Game"),r.a.createElement(d.b,null,r.a.createElement(b,{path:"/platforms/:id",getPlatform:function(t){return e.getPlatform(t)},addGame:function(t,a){return e.addGame(t,a)}}),r.a.createElement(v,{path:"/",platforms:this.state.platforms,addPlatform:function(t){return e.addPlatform(t)}}),r.a.createElement(E,{path:"/platforms/:platformId/games/:gameId",getGame:function(t,a){return e.getGame(t,a)}}),r.a.createElement(y,{path:"/login",logOut:function(){return e.logOut()},logIn:function(t,a){return e.logIn(t,a)},username:this.state.username}),r.a.createElement(k,{path:"/add",username:this.state.username,addGame:function(t,a){return e.addGame(t,a)},platforms:this.state.platforms}),r.a.createElement(O,{path:"/admin",username:this.state.username,addPlatform:function(t){return e.addPlatform(t)}})))}}]),t}(n.Component);u.a.render(r.a.createElement(j,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.db9c1438.chunk.js.map